<!DOCTYPE html>
<html>
<head>
    <title>Repo Analyser</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
</head>
<body>
<h1>Welcome</h1>
<p>Enter github repo url:</p>
<input type="text" id="repoUrl" value="https://github.com/rickbala/agame" size="40"/>
<br/><br/>
<input type="button" value="1 Request" onclick="analyseRepo(1);"/>
<input type="button" value="100 Requests" onclick="analyseRepo(100);"/>
<input type="button" value="1000 Requests" onclick="if(confirm('This can take a while. Are you sure?')) analyseRepo(1000);"/>
<br/><br/>
<div id="result"></div>
<script>
    function analyseRepo(count){
        $("#result").html('Fetching data...');
        const repoUrl= $("#repoUrl").val();
        for (var i=0 ; i<count ; i++){
            $.get("analyseRepo?repoUrl=" + repoUrl, function(data){
                $("#result").html($("#result").html() + "<br/><br/>" + data);
            });
        }
    }
</script>
</body>
</html>